webpackJsonp([13],{162:function(t,e,r){"use strict";var i=r(163);!function(t){t&&t.__esModule}(i)},163:function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t&&!r.call(t,e);)t=t.parentElement;return t}function s(t){return!!t.dataset.valRequired||"true"===t.dataset.isrequired}function o(t){return!t.disabled&&("checkbox"===t.type&&!t.checked||(!t.value||void 0))}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),u=r(2),c=function(){function t(e,r){i(this,t),this.form=e,this.config=Object.assign({MVCErrorClass:"input-validation-error",groupErrorClass:"val-err",messageErrorClass:"err-bubble",formSubmitHandler:null},r),this.requiredInputs=[],this.init()}return a(t,[{key:"init",value:function(){var t=this;this.form.querySelectorAll('input:not(.submit):not([type="hidden"]), textarea, select').forEach(this.addInput.bind(this));var e=this.form.querySelector('button[type="submit"]');this.addSubmitButton(e),(0,u.DOMObserver)(this.form,function(e,r){if(r&&r.querySelector){var i=r.querySelector('input:not(.submit):not([type="hidden"]), textarea, select');i&&("added"===e&&t.addInput(i),"removed"===e&&t.removeInput(i))}})}},{key:"addInput",value:function(t){t.addEventListener("focus",this.onFocus.bind(this)),s(t)&&this.requiredInputs.push(t)}},{key:"removeInput",value:function(t){this.requiredInputs.splice(this.requiredInputs.indexOf(t),1)}},{key:"onFocus",value:function(t){var e=t.target,r=n(e,".group");if(r){r.classList.remove(this.config.groupErrorClass);var i=r.querySelectorAll("."+this.config.messageErrorClass);if(i.length>0)for(var s=0;s<i.length;s++){var o=i[s];e.parentNode.removeChild(o)}}}},{key:"setErrors",value:function(t){var e=this;t.forEach(function(t,r){var i=n(t,".group");i&&i.classList.add(e.config.groupErrorClass);var s=document.createElement("div");s.classList.add(e.config.messageErrorClass);var o=t.dataset.valRequired;o&&(s.innerHTML=o,t.parentNode.appendChild(s))}),this.setErrorButton.call(this)}},{key:"validateForm",value:function(){var t=[];return this.requiredInputs.forEach(function(e,r){o(e)&&t.push(e)}),!t.length||(this.setErrors.call(this,t),!1)}},{key:"onSubmit",value:function(t){t.preventDefault(),this.validateForm.call(this)&&(this.submitButton.disabled=!0,this.config.formSubmitHandler?this.config.formSubmitHandler(this.resetFormState.bind(this)):this.form.submit())}},{key:"addSubmitButton",value:function(t){t.addEventListener("click",this.onSubmit.bind(this)),this.submitButton=t,t.classList.contains(l.danger)&&this.setErrorButton.call(this)}},{key:"setErrorButton",value:function(){var t=this;this.submitButton.classList.remove(l.primary),this.submitButton.classList.add(l.danger),setTimeout(function(){t.submitButton.classList.remove(l.danger),t.submitButton.classList.add(l.primary)},3e3)}},{key:"resetFormState",value:function(){this.submitButton.disabled=!1}}]),t}(),l={primary:"primary",danger:"danger"},d=document.querySelector(".form");d&&new c(d,{formSubmitHandler:window.mvcFormSubmitHandler})}},[162]);